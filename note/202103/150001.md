---
title: 深度优先搜索
---

# 深度优先搜索

<script type="text/javascript" src="/include/head.js"></script>

深度优先搜索需要借助栈，不过真正实现时一般使用递归，假设从s结点开始搜索。

根据对结点进行访问和操作的位置，DFS可以分为两种。

(1)访问和操作自身

```
void DFS(int x) {
    if (x到达递归边界) {
        // 得到一条到边界的路径，进行处理
        return;
    }
    if (x满足剪枝条件) return;

    // 在此处对x进行先序访问和更新操作

    for (遍历x的所有可能后继y) {
        if (y到达递归边界) {
            // 得到一条到边界的路径，进行处理
            continue;
        }
        if (y满足剪枝条件) continue;

        DFS(y);
    }

    // 后序访问和还原现场
}

DFS(s); // 调用DFS，从s结点开始搜索
```

(2)访问和操作后继

```
void DFS(int x) {
    if (x到达递归边界) {
        // 得到一条到边界的路径，进行处理
        return;
    }
    if (x满足剪枝条件) return;

    for (遍历x的所有可能后继y) {
        if (y到达递归边界) {
            // 得到一条到边界的路径，进行处理
            continue;
        }
        if (y满足剪枝条件) continue;

        // 在此处对y进行先序访问和更新操作
        DFS(y);
        // 后序访问和还原现场
    }
}

// 在此处对s进行访问
DFS(s); // 调用DFS，从s结点开始搜索
```

注解：

(1)关于剪枝和递归边界的两种位置及其区别可以参考<a href="https://www.dywan.xyz/note/202103/150003">枚举</a>。

(2)树和图的遍历与指数/排列枚举的区别在于，树和图需要遍历根结点/源结点，而指数/排列枚举的解空间树的根结点是一个无意义的空结点，其子结点表示开头位的若干选择，不需要对根结点进行访问和操作；

可以认为递归有两种基本类型，一种是根结点/源结点有意义，要进行访问和操作，一种解空间树根结点无意义，不需要进行访问和操作。

(3)如果要对根结点/源结点进行访问和操作，最好在扩展后继之前进行访问和操作，（扩展后继之后进行访问和操作也不是不可以，但是遍历不到根结点/源结点，需要在调用DFS之前对根结点/源结点单独进行访问和操作）；

如果不需要对解空间树的根结点进行访问和操作，那么就在扩展后继之后进行访问和操作就可以了，正好不会遍历到根结点；

在扩展后继之后进行访问和操作还有一个好处，这个时候知道后继y的前驱就是x，如果对y进行操作时需要用到前驱x的信息，最好是在扩展后继之后进行。

---

<script type="text/javascript" src="/include/tail.js"></script>
